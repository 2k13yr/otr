<!doctype html>
<html lang="en">
  <head>
    <title>Test OTR</title>
  </head>
  <body></body>

  <!-- Load bigint.js -->
  <script src="../vendor/bigint.js"></script>

  <!-- Load crypto.js components. TODO: make a build of these -->
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/core.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/cipher-core.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/aes.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/sha1.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/sha256.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/hmac.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/pad-nopadding.js" type="text/javascript"></script>
  <script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/mode-ctr.js" type="text/javascript"></script>

  <!-- Load otr.j or otr.min.js -->
  <script src="../otr.min.js"></script>

  <!-- Ready to go! -->
  <script>
    var ui = function (msg) { console.log(msg); };
    var start = (new Date()).getTime();
    var userA = new OTR(null, ui, function (msg) {
      userB.receiveMsg(msg);
    });
   document.write('generating OTR object took <strong>' + ((new Date()).getTime() - start) + 'ms</strong>');
   var userB = new OTR(null, ui, userA.receiveMsg);
   start = (new Date()).getTime();
   userA.sendQueryMsg()
   document.write('<br />ake took <strong>' + ((new Date()).getTime() - start) + 'ms</strong>');
   console.log(userA.msgstate)
  </script>

</html>